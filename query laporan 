SELECT count(c.id_transaksi_dokter)*b.komisi_dokter as total_komisi_dokter, count(d.id_transaksi_perawat)*b.komisi_perawat as total_komisi_perawat, (select sum(harga_jual) from tbl_transaksi_obat x left join tbl_barang y on x.id_obat=y.id_barang where x.id_master_transaksi=8) as biaya_obat, total-(count(c.id_transaksi_dokter)*b.komisi_dokter + count(d.id_transaksi_perawat)*b.komisi_perawat) - (select sum(harga_jual) from tbl_transaksi_obat x left join tbl_barang y on x.id_obat=y.id_barang where x.id_master_transaksi=8) as keuntungan FROM `tbl_master_transaksi` a left join tbl_perawatan b on a.id_perawatan=b.id_perawatan left join tbl_transaksi_dokter c on a.id_master_transaksi=c.id_master_transaksi left join tbl_transaksi_perawat d on a.id_master_transaksi=d.id_master_transaksi where a.id_master_transaksi=8